---
title: 跨域处理
date: 2020-05-19
---
[[toc]]
## 同源策略
`同源策略其实是浏览器的一种保护机制,它阻止了不同源之间进行数据交互,是为了保护不同页面之间信息安全`
## 什么是跨域?
:::details 跨域
请求地址的组成:协议  域名  端口号,三者只要有一个不同,就认定为不同源
在进行不同源的访问时,我们就认为是跨域.
:::
## 怎样解决跨域?
### 方式一:通过vue-cli配置代理服务器(最常用)
:::details 配置代理
在vue.config.js中配置:(简便)
```js
devServer:{
  proxy:'目标地址'
}
```
---缺点:
不可控,当请求的资源在当前项目的public目录中存在时会直接返回,并不会将请求转发给指定的服务器
不能代理多种请求
在vue.config.js中配置:(详细)
```js
devServer:{
  '指定代理前缀':{//所有包含此前缀的请求将会被转发到目标地址
    target:'目标地址',
    pathRewrite:{'代理前缀':''},//将前缀去除,不然会导致目标服务器拿到错误的地址
    ws:true,//用于支持websocket
    changeOrigin:false//用于控制请求头中的host,如果为false就代表代理服务器会对目标服务器表明自己是与它相同域名的host,如果为true则代表代理服务器对目标服务器实话实说,表明自己真正的host
  }
}
```
:::
### 方式二:jsonp(需要前后端搭配)
`其实jsonp解决跨域问题的本质就是利用script标签的src属性来进行，由于script标签的src属性不受跨域的现在，所以我们可以将我们要请求的服务器的地址及相关参数作为src的值来进行传输，然后再由后台进行配合就可以实现跨域。`
### 方式三:后端设置请求头
### 方式四:设置nginx